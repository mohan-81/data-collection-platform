{% extends "base.html" %}
{% block content %}

<section class="px-6 py-24 bg-slate-950 min-h-screen relative overflow-hidden">

  <div class="absolute top-0 left-1/4 w-[500px] h-[500px] bg-cyan-500/10 blur-[120px] rounded-full opacity-50"></div>
  <div class="absolute bottom-0 right-1/4 w-[600px] h-[600px] bg-blue-600/10 blur-[150px] rounded-full opacity-50"></div>
  <div class="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-[0.03] pointer-events-none"></div>

  <div class="max-w-7xl mx-auto relative z-10">

    <div class="text-center mb-20" data-aos="fade-down">

      <div class="inline-flex items-center gap-2 px-4 py-1.5 rounded-full border border-cyan-400/20 bg-cyan-400/10 text-cyan-400 text-[10px] font-mono mb-8 tracking-[0.2em] uppercase backdrop-blur-md">
        <span class="relative flex h-2 w-2">
          <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-cyan-400 opacity-75"></span>
          <span class="relative inline-flex rounded-full h-2 w-2 bg-cyan-500"></span>
        </span>
        Integration Hub
      </div>

      <h1 class="text-6xl md:text-8xl font-black text-white mb-8 tracking-tighter leading-none">
       Data <span class="text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-400">Connectors</span>
      </h1>

      <p class="text-slate-400 max-w-2xl mx-auto text-lg md:text-xl font-medium">
        Connect Segmento with social, cloud, developer, and analytics platforms
      </p>

    </div>

    <div class="flex flex-col lg:flex-row gap-6 mb-16 items-center justify-between bg-slate-900/40 p-4 rounded-3xl border border-white/5 backdrop-blur-xl shadow-2xl">

      <div class="relative w-full lg:w-1/3 group">
        <div class="absolute inset-y-0 left-4 flex items-center pointer-events-none text-slate-500 group-focus-within:text-cyan-400 transition-colors">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>
        </div>
        <input
          id="searchInput"
          type="text"
          placeholder="Search connectors..."
          class="w-full bg-slate-950/50 border border-slate-700/50 rounded-2xl pl-12 pr-4 py-3.5 text-white focus:border-cyan-400/50 focus:ring-4 focus:ring-cyan-400/10 outline-none transition-all"
        >
      </div>

      <div class="flex flex-wrap gap-2 justify-center">
        <button class="filterBtn active px-6 py-2.5 bg-cyan-400 text-black rounded-xl font-bold text-sm shadow-lg shadow-cyan-400/20 transition-all" data-cat="all">
          All
        </button>
        {% for cat in [('google','Google'), ('dev','Git / Dev'), ('social','Social'), ('video','Video'), ('other','Others')] %}
        <button class="filterBtn px-6 py-2.5 bg-slate-800/40 text-slate-300 rounded-xl border border-slate-700/50 hover:bg-slate-800 hover:text-white hover:border-cyan-400/30 transition-all text-sm font-semibold" data-cat="{{cat[0]}}">
          {{cat[1]}}
        </button>
        {% endfor %}
      </div>

    </div>

    <div
      id="connectorsGrid"
      class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8"
    >
      </div>

  </div>
</section>

<script src="/static/js/connectors_data.js"></script>

<style>
    /* Prevent cards from merging into background using a subtle multi-layered border */
    .connector-card {
        background: rgba(255, 255, 255, 0.98);
        box-shadow: 0 10px 30px -10px rgba(0, 0, 0, 0.5), inset 0 0 0 1px rgba(255, 255, 255, 0.1);
    }
    
    .connector-card:hover {
        background: #ffffff;
        transform: translateY(-8px);
        box-shadow: 0 20px 40px -10px rgba(34, 211, 238, 0.3);
    }

    .active-pills {
        background: #22d3ee !important;
        color: #000 !important;
        font-weight: 800 !important;
        box-shadow: 0 10px 20px -5px rgba(34, 211, 238, 0.4) !important;
        border-color: transparent !important;
    }
</style>

<script>
if(typeof CONNECTORS === "undefined"){
  console.error("âŒ connectors_data.js not loaded!");
}

const grid = document.getElementById("connectorsGrid");

function render(list){
  grid.innerHTML = "";

  list.forEach((c, index) => {
    const card = document.createElement("div");
    card.setAttribute('data-aos', 'fade-up');
    card.setAttribute('data-aos-delay', (index % 4) * 50);

    card.className = `
      connector-card
      p-7
      rounded-[2rem]
      transition-all
      duration-500
      cursor-pointer
      relative
      group
    `;

    card.onclick = () => {
      location.href = "/connectors/" + c.id;
    };

    const dataPreview = c.data
      .slice(0,3)
      .map(d => `<li class="flex items-center gap-2"><span class="w-1 h-1 rounded-full bg-cyan-500"></span>${d}</li>`)
      .join("");
      
    card.innerHTML = `
      <div class="flex items-start justify-between mb-6">
        <div class="p-3 bg-slate-50 rounded-2xl border border-slate-100 shadow-sm group-hover:scale-110 transition-transform duration-500">
            <img
              src="${c.logo}"
              alt="${c.name}"
              class="w-10 h-10 object-contain"
            >
        </div>
        <span class="text-[9px] font-bold uppercase tracking-widest text-cyan-600 bg-cyan-50 px-3 py-1 rounded-full border border-cyan-100">
            ${c.category}
        </span>
      </div>

      <h3 class="text-xl font-black text-slate-900 mb-2 group-hover:text-cyan-600 transition-colors">
        ${c.name}
      </h3>

      <p class="text-sm text-slate-500 mb-6 leading-relaxed line-clamp-2 font-medium">
        ${c.description}
      </p>

      <div class="mb-8 p-4 bg-slate-50/50 rounded-2xl border border-slate-100">
          <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-3">Captured Data</p>
          <ul class="text-xs text-slate-600 space-y-2">
            ${dataPreview}
          </ul>
      </div>

      <button
        class="w-full py-3.5 bg-slate-900 text-white rounded-2xl group-hover:bg-cyan-400 group-hover:text-black group-hover:shadow-lg group-hover:shadow-cyan-400/30 transition-all duration-300 font-bold text-sm flex items-center justify-center gap-2"
      >
        View Connector
        <svg class="w-4 h-4 opacity-0 group-hover:opacity-100 -translate-x-2 group-hover:translate-x-0 transition-all" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"/></svg>
      </button>
    `;

    grid.appendChild(card);
  });
}

render(CONNECTORS);

/* -----------------------------
   SEARCH & FILTER LOGIC
----------------------------- */

document.getElementById("searchInput").addEventListener("input", e => {
  const val = e.target.value.toLowerCase();
  const filtered = CONNECTORS.filter(c =>
    c.name.toLowerCase().includes(val) ||
    c.description.toLowerCase().includes(val)
  );
  render(filtered);
});

document.querySelectorAll(".filterBtn").forEach(btn => {
  btn.addEventListener("click", () => {
    document.querySelectorAll(".filterBtn").forEach(b => b.classList.remove("active-pills"));
    btn.classList.add("active-pills");

    const cat = btn.dataset.cat;
    render(cat === "all" ? CONNECTORS : CONNECTORS.filter(c => c.category === cat));
  });
});

</script>

{% endblock %}